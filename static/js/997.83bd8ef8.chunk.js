"use strict";(self.webpackChunksimple_chat=self.webpackChunksimple_chat||[]).push([[997],{37997:function(e,n,t){function a(){return Promise.resolve()}function s(e){e=e.children;var n=(0,C.useState)("Chat"),t=(n=(0,N.Z)(n,2))[0],a=n[1],s=(n=(0,C.useState)(!1),(n=(0,N.Z)(n,2))[0]),i=n[1],l=(0,C.useCallback)((function(e){a(e),i(!1)}),[a]),r=(n=(0,C.useCallback)((function(){l("Chat")}),[l]),(0,C.useCallback)((function(){return i((function(e){return!e}))}),[])),c=(0,C.useCallback)((function(){return i(!1)}),[]);return(0,Z.jsx)(M.Provider,{value:{activeWorkspace:t,closeAdminPanel:n,displayWorkspace:l,pinnedMessageListOpen:s,closePinnedMessageListOpen:c,togglePinnedMessageListOpen:r},children:e})}function i(e){var n=e.children,t=e.defaultValues,a=e.workspace,s=e.onSubmit,i=(e=(0,D.mx)()).client,l=e.channel,r=e.setActiveChannel,c=(e=(0,C.useState)(t.name),(e=(0,N.Z)(e,2))[0]),o=e[1],u=(e=(0,C.useState)(t.members),(e=(0,N.Z)(e,2))[0]),d=e[1],m=(e=(0,C.useState)({name:null,members:null}),(e=(0,N.Z)(e,2))[0]),h=e[1],p=null==(e=(e=a).match(/.*__(team|messaging)/))?void 0:e[1],g=(e=a).match("Channel-Create")?"create":e.match("Channel-Edit")?"update":void 0,v=(0,C.useCallback)(function(){var e=(0,G.Z)((0,F.Z)().mark((function e(n){var t,a,s;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,a=n.members,p&&0!==a.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.channel(p,t,{name:t,members:a,demo:"team"});case 5:return s=e.sent,e.next=8,s.watch();case 8:r(s);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[p,r,i]),x=(0,C.useCallback)(function(){var e=(0,G.Z)((0,F.Z)().mark((function e(n){var t,a,s;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.name,s=n.members,a!==((null==l||null==(t=l.data)?void 0:t.name)||(null==l||null==(t=l.data)?void 0:t.id)))return e.next=4,null==l?void 0:l.update({name:a},{text:"Channel name changed to ".concat(a)});e.next=4;break;case 4:if(null!=s&&s.length)return e.next=7,null==l?void 0:l.addMembers(s);e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[l]),f=(0,C.useCallback)((function(e){var n=e.action,a=e.createChannelType,s=(e=e.values,{name:null,members:null});return"create"===n&&(s={name:e.name||"team"!==a?null:"Channel name is required",members:e.members.length<2?"At least one additional member is required":null}),"update"===n&&e.name===t.name&&0===e.members.length&&(s={name:"Name not changed (change name or add members)",members:"No new members added (change name or add members)"}),Object.values(s).some((function(e){return!!e}))?s:null}),[t.name]),j=(a=(0,C.useCallback)(function(){var e=(0,G.Z)((0,F.Z)().mark((function e(n){var t;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t=f({values:{name:c,members:u},action:g,createChannelType:p}))return h(t),e.abrupt("return");e.next=5;break;case 5:if(e.prev=5,"create"===g)return e.next=9,v({name:c,members:u});e.next=9;break;case 9:if("update"===g)return e.next=12,x({name:c,members:u});e.next=12;break;case 12:s(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(n){return e.apply(this,arguments)}}(),[g,p,c,u,v,x,s,f]),e=(0,C.useCallback)((function(e){e.preventDefault(),o(e.target.value)}),[]),(0,C.useCallback)((function(e){d((function(n){var t=e.target.value;return e.target.checked?n.length?[].concat((0,z.Z)(n),[t]):[t]:null==n?void 0:n.filter((function(e){return e!==t}))}))}),[]));return(0,C.useEffect)((function(){o(t.name),d(t.members)}),[t,p]),(0,Z.jsx)(U.Provider,{value:{createChannelType:p,errors:m,name:c,members:u,handleInputChange:e,handleMemberSelect:j,handleSubmit:a},children:n})}function l(){return(0,C.useContext)(U)}function r(e){var n=e.buttonText;e=e.onButtonClick;return(0,Z.jsx)("div",{className:"admin-panel__form-footer",children:(0,Z.jsx)("button",{onClick:e,children:n})})}function c(e){return e=e.onClose,(0,Z.jsx)("button",{className:q,onClick:e})}function o(e){var n=e.onClose;e=e.title;return(0,Z.jsxs)("div",{className:"admin-panel__form-header",children:[(0,Z.jsx)("div",{className:"workspace-header__title workspace-header__block",children:e}),(0,Z.jsx)(c,{onClose:n})]})}function u(e){return e=e.errorMessage,(0,Z.jsx)("div",{className:"admin-panel__form-validation-error",children:void 0===e?"":e})}function d(e){var n=e.name,t=e.error,a=e.placeholder;e=e.onChange;return(0,Z.jsxs)("div",{className:"channel-name-input-field",children:[(0,Z.jsxs)("h2",{children:[(0,Z.jsx)("span",{children:"Name"}),(0,Z.jsx)(u,{errorMessage:t})]}),(0,Z.jsx)("input",{onChange:e,placeholder:void 0===a?"channel-name":a,type:"text",value:void 0===n?"":n})]})}function m(e){e=e.children;var n=(t=l()).errors,t=t.createChannelType;return(0,Z.jsxs)("div",{className:"user-list__container",children:[(!t||"team"===t)&&(0,Z.jsxs)("h2",{children:[(0,Z.jsx)("span",{children:"Add Members"}),(0,Z.jsx)(u,{errorMessage:n.members})]}),(0,Z.jsxs)("div",{className:"user-list__header user-list__row",children:[(0,Z.jsxs)("div",{className:"user-list__column-block",children:[(0,Z.jsx)("p",{children:"User"}),(0,Z.jsx)("p",{className:"user-list__column--last-active",children:"Last Active"})]}),(0,Z.jsx)("div",{className:"user-list__column--checkbox",children:(0,Z.jsx)("p",{children:"Invite"})})]}),e]})}function h(e){var n=e.index,t=(e=e.user,l().handleMemberSelect),a=e.name||e.id;return(0,Z.jsxs)("label",{htmlFor:e.id,title:a,className:"user-list__row",children:[(0,Z.jsxs)("div",{className:"user-list__column-block",children:[(0,Z.jsxs)("div",{className:"user-list__column--user-data",children:[(0,Z.jsx)(W.q,{image:e.image,name:a,size:32}),(0,Z.jsx)("p",{className:"user-item__name",children:a})]}),(0,Z.jsx)("p",{className:"user-list__column--last-active",children:V[n]||"Yesterday"})]}),(0,Z.jsx)("div",{className:"user-list__column--checkbox",children:(0,Z.jsx)("input",{type:"checkbox",name:"members",id:e.id,value:e.id,onChange:t})})]})}function p(){var e=(n=(0,D.mx)()).client,n=(n.channel,l().createChannelType),t=(0,C.useState)(null),a=(t=(0,N.Z)(t,2))[0],s=t[1],i=(t=(0,C.useState)(),(t=(0,N.Z)(t,2))[0]),r=t[1],c=[e.userID,"deleted-user-1234237-693e2db320a58b30cadd552e894c0ea8","freelancer-self-employed"];return(0,C.useEffect)((function(){var n=function(){var n=(0,G.Z)((0,F.Z)().mark((function n(){var t;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a)return n.abrupt("return");n.next=2;break;case 2:return s("loading"),n.prev=3,n.next=6,e.queryUsers({id:{$nin:c}},{id:1},{limit:10});case 6:(t=n.sent).users.length?r(t.users):s("empty"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),s("error");case 13:s(null);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();e&&n()}),[e,n]),(0,Z.jsx)(m,{children:a?(0,Z.jsx)("div",{className:"user-list__message",children:J[a]}):(null==i?void 0:i.length)&&i.map((function(e,n){return(0,Z.jsx)(h,{index:n,user:e},e.id)}))})}function g(){var e=L().closeAdminPanel,n=(i=l()).createChannelType,t=i.name,a=i.handleInputChange,s=i.handleSubmit,i=i.errors;return(0,Z.jsxs)("div",{className:"admin-panel__form",children:[(0,Z.jsx)(o,{onClose:e,title:"team"===n?"Create new channel":"Send direct message"}),"team"===n&&(0,Z.jsx)(d,{error:i.name,name:t,onChange:a,placeholder:"channel-name (no spaces)"}),(0,Z.jsx)(p,{}),(0,Z.jsx)(r,{onButtonClick:s,buttonText:"team"===n?"Create channel":"Create message group"})]})}function v(){var e=L().closeAdminPanel,n=(s=l()).name,t=s.handleInputChange,a=s.handleSubmit,s=s.errors;return(0,Z.jsxs)("div",{className:"admin-panel__form",children:[(0,Z.jsx)(o,{onClose:e,title:"Edit channel"}),(0,Z.jsx)(d,{name:n,error:s.name,onChange:t}),(0,Z.jsx)(p,{}),(0,Z.jsx)(r,{buttonText:"Save changes",onButtonClick:a})]})}function x(){return(0,C.useContext)(Y)}function f(){return(0,Z.jsxs)("div",{className:"giphy-icon__wrapper",children:[(0,Z.jsx)("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M2.75774 0.666748H5.66683L3.72744 4.54554H5.66683L2.03047 11.3334L2.75774 6.48493H0.333496L2.75774 0.666748Z",fill:"white"})}),(0,Z.jsx)("p",{className:"giphy-icon__text",children:"GIPHY"})]})}function j(){var e=(s=x()).isComposingGiphyReply,n=s.clearGiphyFlagThread,t=s.setComposeGiphyReplyFlag,a=(0,ie.Nc)(),s=a.openEmojiPicker,i=a.closeEmojiPicker,l=a.emojiPickerIsOpen,r=(0,C.useState)(null),c=(r=(0,N.Z)(r,2))[0],o=(r=r[1],(0,C.useState)(null)),u=(o=(0,N.Z)(o,2))[0],d=(o=o[1],u=(c=(0,se.D)(c,u,{placement:"top-end"})).styles,c=c.attributes,(0,C.useCallback)((function(s){var i=s.nativeEvent instanceof InputEvent&&"deleteContentBackward"===s.nativeEvent.inputType;1===a.text.length&&i&&n(),a.text.startsWith("/giphy")&&!e()&&(console.log("replacing"),s.target.value=s.target.value.replace("/giphy",""),t()),a.handleChange(s)}),[n,a,t,e]));return(0,Z.jsxs)("div",{className:"thread-message-input__wrapper",children:[(0,Z.jsxs)("div",{className:"thread-message-input__input",children:[e()&&(0,Z.jsx)(f,{}),(0,Z.jsx)(le.T,{onChange:d,placeholder:"Reply"}),(0,Z.jsx)(ue,{type:"emoji",onClick:l?i:s,ref:r}),(0,Z.jsx)("button",{className:"thread-message-input__send-button",disabled:!a.numberOfUploads&&!a.text.length,onClick:a.handleSubmit,children:(0,Z.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M0.5 12L13.5 6L0.5 0V4.66666L9.8125 6L0.5 7.33334V12Z"})})})]}),l&&(0,Z.jsx)("div",(0,_.Z)((0,_.Z)({className:"str-chat__message-textarea-emoji-picker-container",style:u.popper},c.popper),{},{ref:o,children:(0,Z.jsx)(re.h,{})}))]})}t.r(n),t.d(n,{ChatApp:function(){return gn}});var _=t(1413),C=t(72791),b=t(21626),y=(n=t(31054),t(15502)),k=t(27881),w=t(98190),N=t(29439),Z=t(80184),M=(0,C.createContext)({activeWorkspace:"Chat",closeAdminPanel:a,displayWorkspace:a,pinnedMessageListOpen:!1,togglePinnedMessageListOpen:a,closePinnedMessageListOpen:a}),L=function(){return(0,C.useContext)(M)},S=function(e){return function(e){window.parent.postMessage(e,"*")}},I="https://youtu.be/Ujvy-DEA-UM",E="react-to-message",P="run-giphy",H="send-youtube",R="drag-drop-image",T="start-thread",O="send-message",A=t(77540),B=t(54149),D=t(28802),z=t(93433),F=t(74165),G=t(15861),U=(0,C.createContext)({handleInputChange:function(){return null},handleMemberSelect:function(){return null},handleSubmit:function(){return null},members:[],name:"",errors:{name:null,members:null}}),q="CloseButton_closeButton__Tb+s+",W=t(84565),V=["12 min ago","27 min ago","6 hours ago","14 hours ago"],J={empty:"No users found.",error:"Error loading, please refresh and try again.",loading:"Loading users..."},$=function(){var e=(n=(0,D.mx)()).client,n=n.channel,t=(a=L()).displayWorkspace,a=a.activeWorkspace,s=(0,C.useCallback)((function(){return t("Chat")}),[t]),l={name:"",members:[]},r=null;return a.match("Channel-Create")?(l={members:e.userID?[e.userID]:[],name:""},r=g):a.match("Channel-Edit")&&(l={members:[],name:(null==n||null==(e=n.data)?void 0:e.name)||(null==n||null==(e=n.data)?void 0:e.id)},r=v),(0,Z.jsx)(i,{workspace:a,onSubmit:s,defaultValues:l,children:(0,Z.jsx)("div",{className:"channel__container",children:r&&(0,Z.jsx)(r,{})})})},Y=(0,C.createContext)({}),Q=function(e){e=e.children;var n=(0,C.useState)({"main-input":!1,"thread-input":!1}),t=(n=(0,N.Z)(n,2))[0],a=n[1],s=(n=(0,C.useCallback)((function(e){a((function(n){return e?(0,_.Z)((0,_.Z)({},n),{},{"thread-input":!1}):(0,_.Z)((0,_.Z)({},n),{},{"main-input":!1})}))}),[]),(0,C.useCallback)((function(){a((function(e){return(0,_.Z)((0,_.Z)({},e),{},{"main-input":!1})}))}),[])),i=(0,C.useCallback)((function(){a((function(e){return(0,_.Z)((0,_.Z)({},e),{},{"thread-input":!1})}))}),[]),l=(0,C.useCallback)((function(e){return e?t["thread-input"]:t["main-input"]}),[t]),r=(0,C.useCallback)((function(){return t["main-input"]}),[t]),c=(0,C.useCallback)((function(){return t["thread-input"]}),[t]),o=(0,C.useCallback)((function(){a((function(e){return(0,_.Z)((0,_.Z)({},e),{},{"main-input":!0})}))}),[]),u=(0,C.useCallback)((function(){a((function(e){return(0,_.Z)((0,_.Z)({},e),{},{"thread-input":!0})}))}),[]);return(0,Z.jsx)(Y.Provider,{value:{clearGiphyFlag:n,clearGiphyFlagMainInput:s,clearGiphyFlagThread:i,inputHasGiphyMessage:l,isComposingGiphyMessage:r,isComposingGiphyReply:c,setComposeGiphyMessageFlag:o,setComposeGiphyReplyFlag:u},children:e})},K=t(3979),X=t(80863),ee=t(5628),ne=t(71803),te=t(9667),ae=t(99729),se=t(38272),ie=t(41920),le=t(64892),re=t(91761),ce=t(28182),oe={bold:function(){return(0,Z.jsx)("svg",{width:"10",height:"12",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M7.63 5.82C8.46 5.24 9 4.38 9 3.5C9 1.57 7.43 0 5.5 0H0V12H6.25C8.04 12 9.5 10.54 9.5 8.75C9.5 7.45 8.73 6.34 7.63 5.82ZM2.5 2H5.25C6.08 2 6.75 2.67 6.75 3.5C6.75 4.33 6.08 5 5.25 5H2.5V2ZM5.75 10H2.5V7H5.75C6.58 7 7.25 7.67 7.25 8.5C7.25 9.33 6.58 10 5.75 10Z"})})},code:function(){return(0,Z.jsx)("svg",{width:"20",height:"12",viewBox:"0 0 20 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M7.4 10.6L2.8 6L7.4 1.4L6 0L0 6L6 12L7.4 10.6ZM12.6 10.6L17.2 6L12.6 1.4L14 0L20 6L14 12L12.6 10.6Z"})})},emoji:function(){return(0,Z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,Z.jsx)("path",{fillRule:"evenodd",d:"M1.6 8a6.4 6.4 0 1112.8 0A6.4 6.4 0 011.6 8zM8 0a8 8 0 100 16A8 8 0 008 0zM6 7.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zM11.2 6a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zM5.455 9.141a.8.8 0 10-1.31.918c.542.774 1.578 1.737 2.962 2.024 1.46.303 3.1-.184 4.688-1.948a.8.8 0 00-1.19-1.07C9.313 10.5 8.22 10.68 7.433 10.517c-.863-.18-1.586-.817-1.978-1.376z",clipRule:"evenodd"})})},italics:function(){return(0,Z.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M4 0V2H6.58L2.92 10H0V12H8V10H5.42L9.08 2H12V0H4Z"})})},"strike-through":function(){return(0,Z.jsx)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M3.76889 5.11111C3.53778 4.68444 3.42222 4.19556 3.42222 3.62667C3.42222 3.08444 3.53778 2.59556 3.77778 2.14222C4.00889 1.69778 4.33778 1.31556 4.76444 0.995555C5.19111 0.684444 5.69778 0.435556 6.27556 0.257778C6.86222 0.0888889 7.51111 0 8.21333 0C8.93333 0 9.58222 0.0977777 10.1778 0.302222C10.7644 0.497778 11.2711 0.782222 11.68 1.13778C12.0978 1.49333 12.4178 1.92 12.64 2.40889C12.8622 2.89778 12.9778 3.43111 12.9778 4.01778H10.3022C10.3022 3.74222 10.2578 3.49333 10.1689 3.26222C10.0889 3.02222 9.95556 2.82667 9.77778 2.65778C9.6 2.48889 9.37778 2.36444 9.11111 2.26667C8.84444 2.17778 8.52444 2.12444 8.16889 2.12444C7.82222 2.12444 7.51111 2.16 7.25333 2.24C6.99556 2.32 6.78222 2.42667 6.61333 2.56C6.44444 2.70222 6.31111 2.86222 6.22222 3.04889C6.13333 3.23556 6.08889 3.43111 6.08889 3.63556C6.08889 4.06222 6.31111 4.41778 6.74667 4.71111C7.08444 4.93333 7.43111 5.13778 8 5.33333H3.90222C3.85778 5.26222 3.80444 5.18222 3.76889 5.11111ZM16 8V6.22222H0V8H8.55111C8.71111 8.06222 8.90667 8.12444 9.04 8.17778C9.36889 8.32889 9.62667 8.48 9.81333 8.63111C10 8.78222 10.1244 8.95111 10.1956 9.13778C10.2578 9.31556 10.2933 9.52 10.2933 9.75111C10.2933 9.95556 10.2489 10.1511 10.1689 10.3378C10.0889 10.5156 9.96445 10.6756 9.79556 10.8089C9.62667 10.9422 9.42222 11.04 9.16444 11.12C8.90667 11.1911 8.60444 11.2356 8.26667 11.2356C7.88444 11.2356 7.52889 11.2 7.21778 11.12C6.90667 11.04 6.63111 10.9156 6.40889 10.7467C6.18667 10.5778 6.00889 10.3556 5.88444 10.08C5.76 9.80444 5.66222 9.40444 5.66222 9.00445H3.02222C3.02222 9.49333 3.09333 10.0089 3.23556 10.4089C3.37778 10.8089 3.56444 11.1644 3.81333 11.4844C4.06222 11.7956 4.34667 12.0711 4.68444 12.3022C5.01333 12.5333 5.37778 12.7289 5.76889 12.88C6.16 13.0311 6.56889 13.1467 6.99556 13.2267C7.42222 13.2978 7.84889 13.3422 8.27556 13.3422C8.98667 13.3422 9.63556 13.2622 10.2133 13.0933C10.7911 12.9244 11.2889 12.6933 11.6978 12.3911C12.1067 12.0889 12.4267 11.7067 12.6489 11.2622C12.8711 10.8178 12.9867 10.3111 12.9867 9.74222C12.9867 9.20889 12.8978 8.72889 12.7111 8.31111C12.6667 8.21333 12.6133 8.10667 12.56 8.01778H16V8Z"})})}},ue=(0,C.forwardRef)((function(e,n){var t=e.active,a=e.onClick,s=(e=e.type,oe[e]);return s?(0,Z.jsx)("button",{className:(0,ce.Z)("message-input__controls-button",e,{active:t}),onClick:a,ref:n,children:(0,Z.jsx)(s,{})}):null})),de=t(73461),me=t(14466),he=t(4942),pe=t(12492),ge=t(91545),ve=t(94856),xe=t(14553),fe=t(37861),je=t(11878),_e=t(37643),Ce=t(39377),be=t(74916),ye=t(47118),ke=t(5758),we=t(60040);function Ne(e){var n;return(e=e.message)?(0,Z.jsxs)("div",{className:"str-chat__message-team-pin-indicator",children:[(0,Z.jsx)("img",{className:"pin-icon",src:Ae,alt:"pin"}),e.pinned_by?"Pinned by ".concat((null==(n=e.pinned_by)?void 0:n.name)||(null==(n=e.pinned_by)?void 0:n.id)):"Message pinned"]}):null}function Ze(){var e=(n=L()).pinnedMessageListOpen,n=n.togglePinnedMessageListOpen,t=(0,de.JN)().channel;return(0,Z.jsx)(Z.Fragment,{children:e?(0,Z.jsxs)("div",{className:"pinned-messages__container",children:[(0,Z.jsxs)("div",{className:"pinned-messages__header",children:[(0,Z.jsx)("div",{className:"workspace-header__title",children:"Pins"}),(0,Z.jsx)(c,{onClose:n})]}),(0,Z.jsx)("div",{className:"pinned-messages__list",children:t.state.pinnedMessages.map((function(e){return(0,Z.jsx)(me.v,{groupStyles:["single"],Message:De,message:e},e.id)}))})]}):null})}function Me(){var e,n=L().displayWorkspace,t=(0,D.mx)().client,a=(s=(0,de.JN)()).channel,s=s.watcher_count,i=(0,K.uz)().closeThread,l=L().togglePinnedMessageListOpen,r="".concat((null==a||null==(r=a.data)?void 0:r.name)||(null==a||null==(r=a.data)?void 0:r.id)||"random"),c=(0,C.useCallback)((function(){n("Admin-Channel-Edit")}),[n]),o=(0,C.useCallback)((function(e){null!=i&&i(e),l()}),[i,l]);return(0,Z.jsxs)("div",{className:"team-channel-header__container",children:["messaging"===a.type?(a=Object.values(a.state.members).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==t.userID})),e=a.length-3,(0,Z.jsx)(Z.Fragment,{children:a.length?(0,Z.jsxs)("div",{className:"workspace-header__block",children:[a.map((function(e,n){return e=e.user,2<n?null:(0,Z.jsxs)("div",{className:"workspace-header__block-item",children:[(0,Z.jsx)(W.q,{image:null==e?void 0:e.image,name:(null==e?void 0:e.name)||(null==e?void 0:e.id),size:50}),(0,Z.jsx)("p",{className:"team-channel-header__name user",children:(null==e?void 0:e.name)||(null==e?void 0:e.id)||"Johnny Blaze"})]},n)})),0<e&&(0,Z.jsx)("p",{className:"team-channel-header__name user",children:"and ".concat(e," more")})]}):(0,Z.jsxs)("div",{className:"workspace-header__block",children:[(0,Z.jsx)(W.q,{image:null,size:50}),(0,Z.jsx)("p",{className:"team-channel-header__name user",children:"Johnny Blaze"})]})})):(0,Z.jsxs)("div",{className:"workspace-header__block",children:[(0,Z.jsx)("div",{className:"team-channel-header__name workspace-header__title",children:r}),(0,Z.jsx)("button",{className:"workspace-info-button",onClick:c})]}),(0,Z.jsxs)("div",{className:"workspace-header__block",children:[(0,Z.jsx)("div",{className:"workspace-header__subtitle",children:(a=s)?1===a?"1 online":"".concat(a," online"):"No users online"}),(0,Z.jsx)("button",{className:"workspace-pin-button",onClick:o})]})]})}function Le(){return(0,Z.jsxs)("div",{className:"giphy-icon__wrapper",children:[(0,Z.jsx)("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M2.75774 0.666748H5.66683L3.72744 4.54554H5.66683L2.03047 11.3334L2.75774 6.48493H0.333496L2.75774 0.666748Z",fill:"white"})}),(0,Z.jsx)("p",{className:"giphy-icon__text",children:"GIPHY"})]})}function Se(){var e=L().activeWorkspace;return(0,Z.jsx)(Z.Fragment,{children:e.match("Admin")?(0,Z.jsx)($,{}):(0,Z.jsx)("div",{className:"channel__container",children:(0,Z.jsx)(A.$,{EmptyStateIndicator:Fe,LoadingIndicator:Ke,Input:We,Message:De,ReactionsList:B.Y,ThreadHeader:$e,TypingIndicator:Qe,children:(0,Z.jsx)(Q,{children:(0,Z.jsx)(ze,{})})})})})}function Ie(e){e=e.channel;var n,t=(0,D.mx)().client,a="Johnny Blaze";return(e=Object.values(e.state.members).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==t.userID}))).length&&1!==e.length?(0,Z.jsxs)("div",{className:"channel-preview__item multi",children:[(0,Z.jsx)("span",{children:(0,Z.jsx)(W.q,{image:null==(n=e[0].user)?void 0:n.image,name:(null==(n=e[0].user)?void 0:n.name)||(null==(n=e[0].user)?void 0:n.id),size:18})}),(0,Z.jsx)(W.q,{image:null==(n=e[1].user)?void 0:n.image,name:(null==(n=e[1].user)?void 0:n.name)||(null==(n=e[1].user)?void 0:n.id),size:18}),(0,Z.jsxs)("p",{children:[(null==(n=e[0].user)?void 0:n.name)||(null==(n=e[0].user)?void 0:n.id)||a,","," ",(null==(n=e[1].user)?void 0:n.name)||(null==(n=e[1].user)?void 0:n.id)||a]})]}):(n=e[0],(0,Z.jsxs)("div",{className:"channel-preview__item single",children:[(0,Z.jsx)(W.q,{image:null==(e=n.user)?void 0:e.image,name:(null==(e=n.user)?void 0:e.name)||(null==(e=n.user)?void 0:e.id),size:36}),(0,Z.jsx)("p",{children:(null==n||null==(e=n.user)?void 0:e.name)||(null==n||null==(e=n.user)?void 0:e.id)||a})]}))}function Ee(e){return e=e.name,(0,Z.jsx)("div",{className:"channel-preview__item",children:(0,Z.jsx)("p",{children:e})})}function Pe(e){var n=e.channel,t=(e=e.type,(i=(0,D.mx)()).channel),a=i.setActiveChannel,s=L().displayWorkspace,i=(0,C.useCallback)((function(){s("Chat"),a&&a(n)}),[n,s,a]);return(0,Z.jsx)("button",{className:(0,ce.W)("channel-preview",{selected:(null==n?void 0:n.id)===(null==t?void 0:t.id)}),onClick:i,children:"team"===e?(0,Z.jsx)(Ee,{name:(null==n||null==(t=n.data)?void 0:t.name)||(null==n||null==(i=n.data)?void 0:i.id)||"random"}):(0,Z.jsx)(Ie,{channel:n})})}function He(e){return void 0!==e.cid}function Re(e){var n,t,a=e.focusedId,s=e.result,i=e.setChannel,l=(e=(0,D.mx)()).client,r=e.setActiveChannel;return He(s)?(0,Z.jsxs)("div",{onClick:function(){return i(n)},className:(0,ce.Z)("channel-search__result-container",{highlighted:a===(n=s).id}),children:[(0,Z.jsx)("div",{className:"result-hashtag",children:"#"}),(0,Z.jsx)("p",{className:"channel-search__result-text",children:null==n||null==(e=n.data)?void 0:e.name})]}):(0,Z.jsxs)("div",{onClick:function(){rn({client:l,setActiveChannel:r,user:t})},className:(0,ce.Z)("channel-search__result-container",{highlighted:a===(t=s).id}),children:[(0,Z.jsx)(W.q,{image:t.image,name:t.name||t.id,size:24}),(0,Z.jsx)("p",{className:"channel-search__result-text",children:t.name||t.id||"Johnny Blaze"})]})}function Te(e){var n=e.teamChannels,t=e.directChannels,a=e.focusedId,s=e.loading,i=e.setChannel,l=e.setQuery;return document.addEventListener("click",(function(){return l("")})),(0,Z.jsxs)("div",{className:"channel-search__results",children:[(0,Z.jsx)("p",{className:"channel-search__results-header",children:"Channels"}),s&&!(null!=n&&n.length)&&(0,Z.jsx)("p",{className:"channel-search__results-header",children:(0,Z.jsx)("i",{children:"Loading..."})}),s||null!=n&&n.length?null==n?void 0:n.map((function(e,n){return(0,Z.jsx)(Re,{result:e,focusedId:a,setChannel:i},n)})):(0,Z.jsx)("p",{className:"channel-search__results-header",children:(0,Z.jsx)("i",{children:"No channels found"})}),(0,Z.jsx)("p",{className:"channel-search__results-header",children:"Users"}),s&&!(null!=t&&t.length)&&(0,Z.jsx)("p",{className:"channel-search__results-header",children:(0,Z.jsx)("i",{children:"Loading..."})}),s||null!=t&&t.length?null==t?void 0:t.map((function(e,n){return(0,Z.jsx)(Re,{result:e,focusedId:a,setChannel:i},n)})):(0,Z.jsx)("p",{className:"channel-search__results-header",children:(0,Z.jsx)("i",{children:"No direct messages found"})})]})}function Oe(){return(0,Z.jsxs)("div",{className:"sidebar",children:[(0,Z.jsx)(cn,{}),(0,Z.jsx)(tn,{options:un,filters:on,sort:dn}),(0,Z.jsx)(an,{options:un,filters:on,sort:dn})]})}var Ae=t.p+"static/media/pinIcon.c996fa7a353adbb931ee30c6bafe5382.svg",Be=(0,C.memo)((function(e){var n=e.clearEditingState,t=e.editing,a=e.getMessageActions,s=e.groupStyles,i=e.handleAction,l=e.handleOpenThread,r=e.handleRetry,c=e.initialMessage,o=e.isReactionEnabled,u=e.message,d=e.messageWrapperRef,m=e.onMentionsClickMessage,h=e.onMentionsHoverMessage,p=e.onReactionListClick,g=e.onUserClick,v=e.onUserHover,x=e.reactionSelectorRef,f=void 0===(j=e.renderText)?pe.IY:j,j=e.showDetailedReactions,_=(e=e.threadList,(0,ge.yM)("MessageTeam").Attachment),b=(y=(0,ve.Ht)("MessageTeam")).t,y=y.userLanguage,k=(a=a(),(0,X.Dl)(a)),w=(a=-1<a.indexOf(X.Xh.reply)&&!e,(null==(M=u.i18n)?void 0:M["".concat(y,"_text")])||u.text),N=u.mentioned_users,M=(0,C.useMemo)((function(){return f(w,N)}),[N,w,f]);y=s?s[0]:"single";return u.deleted_at?null:t?(0,Z.jsxs)("div",{className:"str-chat__message-team str-chat__message-team--".concat(y," str-chat__message-team--editing"),"data-testid":"message-team-edit",children:[("top"===y||"single"===y)&&(0,Z.jsx)("div",{className:"str-chat__message-team-meta",children:(0,Z.jsx)(W.q,{image:null==(s=u.user)?void 0:s.image,name:(null==(t=u.user)?void 0:t.name)||(null==(s=u.user)?void 0:s.id),onClick:g,onMouseOver:v,size:44})}),(0,Z.jsx)(te.R,{clearEditingState:n,Input:xe.w,message:u})]}):(n=(0,ce.W)("str-chat__message","str-chat__message-team","str-chat__message-team--".concat(y),(t={"pinned-message":u.pinned},(0,he.Z)(t,"str-chat__message-team--".concat(u.status),u.status),(0,he.Z)(t,"str-chat__message-team--".concat(u.type),u.type),(0,he.Z)(t,"str-chat__message--has-attachment",!(null==(s=u.attachments)||!s.length)),(0,he.Z)(t,"threadList",e),t)),(0,Z.jsxs)(Z.Fragment,{children:[u.pinned&&(0,Z.jsx)(Ne,{message:u}),(0,Z.jsxs)("div",{className:n,"data-testid":"message-team",ref:d,children:[(0,Z.jsx)("div",{className:"avatar-host",children:"top"===y||"single"===y||c?(0,Z.jsx)(W.q,{image:null==(s=u.user)?void 0:s.image,name:(null==(t=u.user)?void 0:t.name)||(null==(n=u.user)?void 0:n.id),onClick:g,onMouseOver:v,size:44}):(0,Z.jsx)("div",{"data-testid":"team-meta-spacer",style:{marginRight:0,width:34}})}),(0,Z.jsxs)("div",{className:"str-chat__message-team-group",children:[("top"===y||"single"===y||c)&&(0,Z.jsxs)("div",{className:"str-chat__message-team-meta",children:[(0,Z.jsxs)("div",{className:"str-chat__message-team-author","data-testid":"message-team-author",onClick:g,children:[(0,Z.jsx)("strong",{children:(null==(s=u.user)?void 0:s.name)||(null==(t=u.user)?void 0:t.id)}),"error"===u.type&&(0,Z.jsx)("div",{className:"str-chat__message-team-error-header",children:b("Only visible to you")})]}),(0,Z.jsx)(fe.i,{format:"H:mm"})]}),(0,Z.jsxs)("div",{className:"str-chat__message-team-content str-chat__message-team-content--".concat(y," str-chat__message-team-content--").concat(""===u.text?"image":"text"),"data-testid":"message-team-content",children:[!c&&"sending"!==u.status&&"failed"!==u.status&&"system"!==u.type&&"ephemeral"!==u.type&&"error"!==u.type&&(0,Z.jsxs)("div",{className:"str-chat__message-team-actions","data-testid":"message-team-actions",children:[j&&(0,Z.jsx)(je.j,{ref:x}),o&&(0,Z.jsx)("span",{"data-testid":"message-team-reaction-icon",onClick:p,title:"Reactions",children:(0,Z.jsx)(_e.EO,{})}),a&&(0,Z.jsx)("span",{"data-testid":"message-team-thread-icon",onClick:l,title:"Start a thread",children:(0,Z.jsx)(_e.or,{})}),k&&(0,Z.jsx)(Ce.P,{inline:!0,messageWrapperRef:d})]}),u.text&&(0,Z.jsx)("div",{className:(0,ce.W)("str-chat__message-team-text",{"str-chat__message-team-text--is-emoji":(0,pe.Kh)(u.text)}),"data-testid":"message-team-message",onClick:m,onMouseOver:h,children:M}),!u.text&&null!=(n=u.attachments)&&n.length?(0,Z.jsx)(_,{actionHandler:i,attachments:u.attachments}):null,0!==(null==(v=u.latest_reactions)?void 0:v.length)&&""!==u.text&&o&&(0,Z.jsx)(B.Y,{}),"failed"===u.status&&(0,Z.jsxs)("button",{className:"str-chat__message-team-failed","data-testid":"message-team-failed",onClick:403!==u.errorStatusCode?function(){return r(u)}:void 0,children:[(0,Z.jsx)(_e.Pz,{}),403!==u.errorStatusCode?b("Message Failed \xb7 Click to try again"):b("Message Failed \xb7 Unauthorized")]})]}),(0,Z.jsx)(be.r,{messageType:"team"}),u.text&&null!=(g=u.attachments)&&g.length?(0,Z.jsx)(_,{actionHandler:i,attachments:u.attachments}):null,u.latest_reactions&&0!==u.latest_reactions.length&&""===u.text&&o&&(0,Z.jsx)(B.Y,{}),!e&&(0,Z.jsx)(ye.u,{onClick:l,reply_count:u.reply_count})]})]})]}))}),X.zs),De=function(e){var n=(0,ke.fr)("MessageTeam"),t=L().closePinnedMessageListOpen,a=(0,C.useRef)(null),s=(0,C.useRef)(null),i=e.message||n.message,l=(c=(0,we.kl)(i,a,s)).isReactionEnabled,r=c.onReactionListClick,c=c.showDetailedReactions;return(0,Z.jsx)("div",{className:i.pinned?"pinned-message":"unpinned-message",children:(0,Z.jsx)(Be,(0,_.Z)((0,_.Z)({},n),{},{isReactionEnabled:l,messageWrapperRef:s,onReactionListClick:r,reactionSelectorRef:a,showDetailedReactions:c,handleOpenThread:function(e){t(),n.handleOpenThread(e)}},e))})},ze=function(){var e=(a=x()).inputHasGiphyMessage,n=a.clearGiphyFlag,t=(0,K.uz)().sendMessage,a=(0,_.Z)((0,_.Z)({},X.Z1.team),{},{user:!0}),s=(0,_.Z)((0,_.Z)({},X.Z1.messaging),{},{user:!0});a=(0,_.Z)((0,_.Z)({},X.Z1),{},{team:a,messaging:s}),s=(0,C.useCallback)((function(a){var s={attachments:a.attachments,mentioned_users:a.mentioned_users,parent_id:null==(s=a.parent)?void 0:s.id,parent:a.parent,text:a.text},i=!!s.parent_id;e(i)&&(a="/giphy ".concat(a.text),s=(0,_.Z)((0,_.Z)({},s),{},{text:a})),t&&(a=t(s),(0,b.t1)(a,"send message"),n(i))}),[e,t,n]);return new Date,(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ee.R,{children:[(0,Z.jsx)(Me,{}),(0,Z.jsx)(ne.r,{disableQuotedMessages:!0,pinPermissions:a,hideDeletedMessages:!0}),(0,Z.jsx)(te.R,{grow:!0,overrideSubmitHandler:s})]}),(0,Z.jsx)(ae.j,{additionalMessageInputProps:{grow:!0,Input:j,overrideSubmitHandler:s}}),(0,Z.jsx)(Ze,{})]})},Fe=function(){var e,n,t=(0,D.mx)(),a=t.channel,s=t.client,i=Object.values((null==a||null==(t=a.state)?void 0:t.members)||{}).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==s.userID}));return(0,Z.jsxs)("div",{className:"channel-empty__container",children:["team"===(null==a?void 0:a.type)?"#heshIcon":i.length?(0,Z.jsx)("div",{className:"channel-empty__avatars",children:i.map((function(e,n){var t;return 2<n?null:(0,Z.jsx)(W.q,{image:null==(t=e.user)?void 0:t.image,name:(null==(t=e.user)?void 0:t.name)||(null==(t=e.user)?void 0:t.id),size:72},n)}))}):(0,Z.jsx)(W.q,{size:72}),(0,Z.jsxs)("p",{className:"channel-empty__main-description",children:["This is the beginning of your chat history","team"===(null==a?void 0:a.type)?" in ":" with ","team"===(null==a?void 0:a.type)?"#".concat((null==a||null==(t=a.data)?void 0:t.name)||(null==a||null==(t=a.data)?void 0:t.id)):1===i.length?(0,Z.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null==(e=i[0].user)?void 0:e.name)||(null==(e=i[0].user)?void 0:e.id))}):2===i.length?(0,Z.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null==(e=i[0].user)?void 0:e.name)||(null==(e=i[0].user)?void 0:e.id)," and @").concat((null==(e=i[1].user)?void 0:e.name)||(null==(e=i[1].user)?void 0:e.id))}):(n="",i.forEach((function(e,t){n=t!==i.length-1?"".concat(n,"@").concat((null==e||null==(t=e.user)?void 0:t.name)||(null==e||null==(t=e.user)?void 0:t.id),", "):"".concat(n," and @").concat((null==e||null==(t=e.user)?void 0:t.name)||(null==e||null==(t=e.user)?void 0:t.id))})),(0,Z.jsx)("span",{className:"channel-empty__user-name",children:n||"the Universe"})),"."]}),(0,Z.jsx)("p",{className:"channel-empty__secondary-description",children:"Send messages, attachments, links, emojis, and more."})]})},Ge=t(65532),Ue=t(74521),qe=t(47238),We=function(){var e,n,t,a,s,i,l,r,c=(0,ge.yM)().TypingIndicator,o=void 0===(u=(b=(0,de.JN)()).acceptedFiles)?[]:u,u=b.multipleUploads,d=(b=(0,ie.Nc)()).handleSubmit,m=b.numberOfUploads,h=b.text,p=b.uploadNewFiles,g=b.maxFilesLeft,v=b.isUploadEnabled,f=b.openEmojiPicker,j=b.closeEmojiPicker,b=b.emojiPickerIsOpen,y=x().isComposingGiphyMessage,k=(e=(0,D.mx)().client,n=(0,de.JN)().channel,t=(0,ie.Nc)(),S=x(),a=S.isComposingGiphyMessage,s=S.clearGiphyFlagMainInput,i=S.setComposeGiphyMessageFlag,S=(0,C.useState)(null),S=(0,N.Z)(S,2),l=S[0],r=S[1],S=(0,C.useMemo)((function(){var t,a="the group",s=("team"===n.type&&(a="#".concat((null==n||null==(s=n.data)?void 0:s.name)||(null==n||null==(s=n.data)?void 0:s.id)||"random")),Object.values(n.state.members).filter((function(n){return(null==(n=n.user)?void 0:n.id)!==e.userID})));return s.length&&1!==s.length||(a=(null==(t=s[0])||null==(t=t.user)?void 0:t.name)||(null==(t=s[0])||null==(s=t.user)?void 0:s.id)||"Johnny Blaze"),"Message ".concat(a)}),[n.type,n.state.members,null==n||null==(S=n.data)?void 0:S.id,null==n||null==(S=n.data)?void 0:S.name,e.userID]),I=(0,C.useCallback)((function(e){var n=e.target.value,r=e.nativeEvent instanceof InputEvent&&"deleteContentBackward"===e.nativeEvent.inputType;1===t.text.length&&r&&s(),a()||!t.text.startsWith("/giphy")||t.numberOfUploads||(e.target.value=n.replace("/giphy",""),i()),"bold"===l?e.target.value=r?"".concat(n.slice(0,n.length-2),"**"):"**".concat(n.replace(/\**/g,""),"**"):"code"===l?e.target.value=r?"".concat(n.slice(0,n.length-1),"`"):"`".concat(n.replace(/`/g,""),"`"):"italics"===l?e.target.value=r?"".concat(n.slice(0,n.length-1),"*"):"*".concat(n.replace(/\*/g,""),"*"):"strike-through"===l&&(e.target.value=r?"".concat(n.slice(0,n.length-2),"~~"):"~~".concat(n.replace(/~~/g,""),"~~")),t.handleChange(e)}),[l,t,s,a,i]),k=(0,C.useCallback)((function(){r((function(e){return"bold"===e?null:"bold"}))}),[]),M=(0,C.useCallback)((function(){r((function(e){return"italics"===e?null:"italics"}))}),[]),L=(0,C.useCallback)((function(){r((function(e){return"strike-through"===e?null:"strike-through"}))}),[]),w=(0,C.useCallback)((function(){r((function(e){return"code"===e?null:"code"}))}),[]),{formatting:l,handleBoldButtonClick:k,handleCodeButtonClick:w,handleItalicsButtonClick:M,handleStrikeThroughButtonClick:L,placeholder:S,onChange:I}),w=k.formatting,M=k.handleBoldButtonClick,L=k.handleCodeButtonClick,S=k.handleItalicsButtonClick,I=k.handleStrikeThroughButtonClick,E=k.onChange,P=(k=k.placeholder,(0,C.useMemo)((function(){return o.reduce((function(e,n){return null==e[n]&&(e[n]=[]),e}),{})}),[o]));v=(P=(0,Ge.uI)({accept:P,disabled:!v||0===g,multiple:u,noClick:!0,onDrop:p})).getRootProps,g=P.isDragActive,u=P.isDragReject;return(0,Z.jsxs)("div",(0,_.Z)((0,_.Z)({},v({className:(0,ce.Z)("team-message-input__wrapper")})),{},{children:[g&&(0,Z.jsxs)("div",{className:(0,ce.Z)("str-chat__dropzone-container",{"str-chat__dropzone-container--not-accepted":u}),children:[!u&&(0,Z.jsx)("p",{children:"Drag your files here"}),u&&(0,Z.jsx)("p",{children:"Some of the files will not be accepted"})]}),(0,Z.jsxs)("div",{className:"team-message-input__input",children:[(0,Z.jsxs)("div",{className:"team-message-input__top",children:[!!m&&(0,Z.jsx)(Ue.E,{}),(0,Z.jsxs)("div",{className:"team-message-input__form",children:[y()&&!m&&(0,Z.jsx)(Le,{}),(0,Z.jsx)(le.T,{onChange:E,placeholder:k}),(0,Z.jsx)(qe.c7,{disabled:!m&&!h.length,sendMessage:d})]})]}),(0,Z.jsxs)("div",{className:"team-message-input__bottom",children:[(0,Z.jsx)(ue,{type:"emoji",onClick:b?j:f}),(0,Z.jsx)(ue,{type:"bold",active:"bold"===w,onClick:M}),(0,Z.jsx)(ue,{type:"italics",active:"italics"===w,onClick:S}),(0,Z.jsx)(ue,{type:"strike-through",active:"strike-through"===w,onClick:I}),(0,Z.jsx)(ue,{type:"code",active:"code"===w,onClick:L})]})]}),c&&(0,Z.jsx)(c,{}),(0,Z.jsx)(re.h,{})]}))},Ve=t(44925),Je=["closeThread","thread"],$e=function(e){var n=e.closeThread,t=e.thread;return(0,Ve.Z)(e,Je),(0,Z.jsxs)("div",{className:"custom-thread-header",children:[(0,Z.jsxs)("div",{className:"workspace-header__block",children:[(0,Z.jsx)("div",{className:"workspace-header__title",children:"Thread"}),(0,Z.jsx)("div",{className:"workspace-header__subtitle",children:null!=t&&t.reply_count?1===t.reply_count?"1 reply":"".concat(t.reply_count," replies"):""})]}),(0,Z.jsx)(c,{onClose:n})]})},Ye=t(27855),Qe=function(){var e,n=(0,D.mx)().client,t=(0,Ye.f5)().typing;return n&&t&&(t=Object.values(t).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==(null==(e=n.user)?void 0:e.id)})).map((function(e){return(null==(e=e.user)?void 0:e.name)||(null==e?void 0:e.id)}))).length?(e="Someone is typing",1===t.length?e="".concat(t[0]," is typing"):2===t.length?e="".concat(t[0]," and ").concat(t[1]," are typing"):2<t.length&&(e="".concat(t[0]," and ").concat(t.length-1," more are typing")),(0,Z.jsxs)("div",{className:"typing-indicator__input",children:[(0,Z.jsxs)("div",{className:"dots",children:[(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"}),(0,Z.jsx)("div",{className:"dot"})]}),(0,Z.jsx)("div",{className:"typing-indicator__input__text",children:e})]})):null},Ke=function(){return null},Xe=t(78206),en=["children","error","loading","type"],nn=(0,C.memo)((function(e){var n=e.children,t=void 0!==(t=e.error)&&t,a=e.loading,s=e.type,i=((0,Ve.Z)(e,en),L().displayWorkspace);e=(0,C.useCallback)((function(){i("Admin-Admin-Channel-Create__".concat(s))}),[s,i]);return t?"team"===s?(0,Z.jsx)("div",{className:"team-channel-list",children:(0,Z.jsx)("p",{className:"team-channel-list__message",children:"Connection error, please wait a moment and try again."})}):null:a?(0,Z.jsx)("div",{className:"team-channel-list",children:(0,Z.jsxs)("p",{className:"team-channel-list__message loading",children:["team"===s?"Channels":"Messages"," loading...."]})}):(0,Z.jsxs)("div",{className:"team-channel-list",children:[(0,Z.jsxs)("div",{className:"team-channel-list__header",children:[(0,Z.jsx)("p",{className:"team-channel-list__header__title",children:"team"===s?"Channels":"Direct Messages"}),(0,Z.jsx)("button",{className:"team-channel-button",onClick:e})]}),n]})})),tn=function(e){var n=e.filters,t=e.options;e=e.sort;return(0,Z.jsx)(Xe.G,{channelRenderFilterFn:function(e){return e.filter((function(e){return"team"===e.type}))},filters:n[0],options:t,sort:e,List:function(e){return(0,Z.jsx)(nn,(0,_.Z)((0,_.Z)({},e),{},{type:"team"}))},Preview:function(e){return(0,Z.jsx)(Pe,(0,_.Z)((0,_.Z)({},e),{},{type:"team"}))}})},an=function(e){var n=e.filters,t=e.options;e=e.sort;return(0,Z.jsx)(Xe.G,{channelRenderFilterFn:function(e){return e.filter((function(e){return"messaging"===e.type}))},filters:n[1],options:t,sort:e,setActiveChannelOnMount:!1,List:function(e){return(0,Z.jsx)(nn,(0,_.Z)((0,_.Z)({},e),{},{type:"messaging"}))},Preview:function(e){return(0,Z.jsx)(Pe,(0,_.Z)((0,_.Z)({},e),{},{type:"messaging"}))}})},sn=t(95095),ln=t.n(sn),rn=function(){var e=(0,G.Z)((0,F.Z)().mark((function e(n){var t,a,s,i,l;return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.client,a=n.setActiveChannel,s=n.user,i={type:"messaging",member_count:2,members:{$eq:[s.id,t.userID||""]}},e.next=4,t.queryChannels(i);case 4:if(i=e.sent,l=(l=(0,N.Z)(i,1))[0])return e.abrupt("return",a(l));e.next=9;break;case 9:return l=t.channel("messaging",{members:[s.id,t.userID||""]}),e.abrupt("return",a(l));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cn=function(){var e=(t=(0,D.mx)()).client,n=t.setActiveChannel,t=(0,C.useState)(),a=(t=(0,N.Z)(t,2))[0],s=t[1],i=(t=(0,C.useState)(),(t=(0,N.Z)(t,2))[0]),l=t[1],r=(t=(0,C.useState)(),(t=(0,N.Z)(t,2))[0]),c=t[1],o=(t=(0,C.useState)(),(t=(0,N.Z)(t,2))[0]),u=t[1],d=(t=(0,C.useState)(""),(t=(0,N.Z)(t,2))[0]),m=t[1],h=(t=(0,C.useState)(!1),(t=(0,N.Z)(t,2))[0]),p=t[1],g=(t=(0,C.useState)(""),(t=(0,N.Z)(t,2))[0]),v=t[1],x=(0,C.useCallback)((function(t){"ArrowDown"===t.key?u((function(e){return void 0===e||void 0===a||e===a.length-1?0:e+1})):"ArrowUp"===t.key?u((function(e){return void 0===e||void 0===a?0:0===e?a.length-1:e-1})):"Enter"===t.key&&(t.preventDefault(),void 0!==a&&void 0!==o&&(He(t=a[o])?n(t):rn({client:e,setActiveChannel:n,user:t})),u(void 0),m(""),v(""))}),[a,e,o,n]),f=(t=function(){var n=(0,G.Z)((0,F.Z)().mark((function n(t){var a,i,r,o;return(0,F.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=e.queryChannels({type:"team",name:{$autocomplete:t}},{},{limit:5}),i=e.queryUsers({id:{$ne:e.userID||""},$and:[{name:{$autocomplete:t}}]},{id:1},{limit:5}),n.next=5,Promise.all([a,i]);case 5:a=n.sent,i=(0,N.Z)(a,2),r=i[0],o=i[1].users,r.length&&l(r),o.length&&c(o),s([].concat((0,z.Z)(r),(0,z.Z)(o))),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),v("");case 17:p(!1);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}(),ln()(t,200,{trailing:!0}));return(0,C.useEffect)((function(){return g&&document.addEventListener("keydown",x),function(){return document.removeEventListener("keydown",x)}}),[x,g]),(0,C.useEffect)((function(){g||(l([]),c([]))}),[g]),(0,C.useEffect)((function(){o&&0<=o&&a&&m(a[o].id||"")}),[a,o]),(0,Z.jsxs)("div",{className:"channel-search__container",children:[(0,Z.jsx)("div",{className:"channel-search__input__wrapper",children:(0,Z.jsx)("input",{onChange:function(e){e.preventDefault(),p(!0),u(void 0),v(e.target.value),e.target.value&&f(e.target.value)},placeholder:"Search",type:"text",value:g})}),g&&(0,Z.jsx)(Te,{teamChannels:i,directChannels:r,focusedId:d,loading:h,setChannel:function(e){v(""),n(e)},setQuery:v})]})},on=[{type:"team",demo:"team",members:{$in:[(t=new w.Z).get("userId")]}},{type:"messaging",demo:"team",members:{$in:[t.get("userId")]}}],un={state:!0,watch:!0,presence:!0,limit:3},dn={last_message_at:-1,updated_at:-1},mn=(t=(sn=new w.Z).get("token"),new URLSearchParams(window.location.search).get("theme")||"light"),hn=new n.V({language:"en",translationsForLanguage:(0,_.Z)({},y)}),pn=b.c8.getInstance("hb9ywaasq4wt",{enableInsights:!0,enableWSFallback:!0}),gn=(t&&pn.connectUser({id:sn.get("userId"),name:sn.get("username"),image:sn.get("avatarURL"),hashedPassword:sn.get("hashedPassword")},t),function(){return function(e){var n=e.chatClient,t=e.targetOrigin;(0,C.useEffect)((function(){function e(e){var n,t=e.message;switch(e.type){case"reaction.new":a(E);break;case"message.new":if("giphy"===(null==t?void 0:t.command))a(P);else{if(null!=t&&null!=(n=t.attachments)&&n.length){if("video"===t.attachments[0].type&&t.attachments[0].og_scrape_url===I){a(H);break}if("image"===t.attachments[0].type){a(R);break}}null!=t&&t.parent_id?a(T):a(O)}}}var a=S(t);return n&&n.on(e),function(){return null==n?void 0:n.off(e)}}),[n,t])}({chatClient:pn,targetOrigin:"https://server-six-pearl.vercel.app/auth/"}),(0,C.useEffect)((function(){function e(e){var n=document.documentElement;e.length&&7===e.length&&(n.style.setProperty("--primary-color","".concat(e,"E6")),n.style.setProperty("--primary-color-alpha","".concat(e,"1A")))}return window.addEventListener("message",(function(n){return e(n.data)})),function(){pn.disconnectUser(),window.removeEventListener("message",(function(n){return e(n.data)}))}}),[]),(0,Z.jsx)("div",{className:"app-content",children:(0,Z.jsx)(k.e,{client:pn,i18nInstance:hn,theme:"team ".concat(mn),children:(0,Z.jsxs)(s,{children:[(0,Z.jsx)(Oe,{}),(0,Z.jsx)(Se,{})]})})})})}}]);