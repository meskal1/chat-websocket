"use strict";(self.webpackChunksimple_chat=self.webpackChunksimple_chat||[]).push([[233],{82233:function(e,n,a){function t(){return Promise.resolve()}function s(e){e=e.children;var n=(0,H.useState)("Chat"),a=(n=(0,I.Z)(n,2))[0],t=n[1],s=(n=(0,H.useState)(!1),(n=(0,I.Z)(n,2))[0]),r=n[1],l=(0,H.useCallback)((function(e){t(e),r(!1)}),[t]),i=(n=(0,H.useCallback)((function(){l("Chat")}),[l]),(0,H.useCallback)((function(){return r((function(e){return!e}))}),[])),c=(0,H.useCallback)((function(){return r(!1)}),[]);return(0,O.jsx)(T.Provider,{value:{activeWorkspace:a,closeAdminPanel:n,displayWorkspace:l,pinnedMessageListOpen:s,closePinnedMessageListOpen:c,togglePinnedMessageListOpen:i},children:e})}function r(e){var n=e.children,a=e.defaultValues,t=e.workspace,s=e.onSubmit,r=(e=(0,ne.mx)()).client,l=e.channel,i=e.setActiveChannel,c=(e=(0,H.useState)(a.name),(e=(0,I.Z)(e,2))[0]),u=e[1],o=(e=(0,H.useState)(a.members),(e=(0,I.Z)(e,2))[0]),d=e[1],m=(e=(0,H.useState)({name:null,members:null}),(e=(0,I.Z)(e,2))[0]),h=e[1],p=null==(e=(e=t).match(/.*__(team|messaging)/))?void 0:e[1],v=(e=t).match("Channel-Create")?"create":e.match("Channel-Edit")?"update":void 0,x=(0,H.useCallback)(function(){var e=(0,S.Z)((0,L.Z)().mark((function e(n){var a,t,s;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.name,t=n.members,p&&0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,r.channel(p,a,{name:a,members:t,demo:"team"});case 5:return s=e.sent,e.next=8,s.watch();case 8:i(s);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[p,i,r]),g=(0,H.useCallback)(function(){var e=(0,S.Z)((0,L.Z)().mark((function e(n){var a,t,s;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.name,s=n.members,t!==((null==l||null==(a=l.data)?void 0:a.name)||(null==l||null==(a=l.data)?void 0:a.id)))return e.next=4,null==l?void 0:l.update({name:t},{text:"Channel name changed to ".concat(t)});e.next=4;break;case 4:if(null!=s&&s.length)return e.next=7,null==l?void 0:l.addMembers(s);e.next=7;break;case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[l]),f=(0,H.useCallback)((function(e){var n=e.action,t=e.createChannelType,s=(e=e.values,{name:null,members:null});return"create"===n&&(s={name:e.name||"team"!==t?null:"Channel name is required",members:e.members.length<2?"At least one additional member is required":null}),"update"===n&&e.name===a.name&&0===e.members.length&&(s={name:"Name not changed (change name or add members)",members:"No new members added (change name or add members)"}),Object.values(s).some((function(e){return!!e}))?s:null}),[a.name]),j=(t=(0,H.useCallback)(function(){var e=(0,S.Z)((0,L.Z)().mark((function e(n){var a;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=f({values:{name:c,members:o},action:v,createChannelType:p}))return h(a),e.abrupt("return");e.next=5;break;case 5:if(e.prev=5,"create"===v)return e.next=9,x({name:c,members:o});e.next=9;break;case 9:if("update"===v)return e.next=12,g({name:c,members:o});e.next=12;break;case 12:s(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(n){return e.apply(this,arguments)}}(),[v,p,c,o,x,g,s,f]),e=(0,H.useCallback)((function(e){e.preventDefault(),u(e.target.value)}),[]),(0,H.useCallback)((function(e){d((function(n){var a=e.target.value;return e.target.checked?n.length?[].concat((0,ae.Z)(n),[a]):[a]:null==n?void 0:n.filter((function(e){return e!==a}))}))}),[]));return(0,H.useEffect)((function(){u(a.name),d(a.members)}),[a,p]),(0,O.jsx)(te.Provider,{value:{createChannelType:p,errors:m,name:c,members:o,handleInputChange:e,handleMemberSelect:j,handleSubmit:t},children:n})}function l(){return(0,H.useContext)(te)}function i(e){var n=e.buttonText;e=e.onButtonClick;return(0,O.jsx)("div",{className:"admin-panel__form-footer",children:(0,O.jsx)("button",{onClick:e,children:n})})}function c(e){return e=e.onClose,(0,O.jsx)("button",{className:se,onClick:e})}function u(e){var n=e.onClose;e=e.title;return(0,O.jsxs)("div",{className:"admin-panel__form-header",children:[(0,O.jsx)("div",{className:"workspace-header__title workspace-header__block",children:e}),(0,O.jsx)(c,{onClose:n})]})}function o(e){return e=e.errorMessage,(0,O.jsx)("div",{className:"admin-panel__form-validation-error",children:void 0===e?"":e})}function d(e){var n=e.name,a=e.error,t=e.placeholder;e=e.onChange;return(0,O.jsxs)("div",{className:"channel-name-input-field",children:[(0,O.jsxs)("h2",{children:[(0,O.jsx)("span",{children:"Name"}),(0,O.jsx)(o,{errorMessage:a})]}),(0,O.jsx)("input",{onChange:e,placeholder:void 0===t?"channel-name":t,type:"text",value:void 0===n?"":n})]})}function m(e){e=e.children;var n=(a=l()).errors,a=a.createChannelType;return(0,O.jsxs)("div",{className:"user-list__container",children:[(!a||"team"===a)&&(0,O.jsxs)("h2",{children:[(0,O.jsx)("span",{children:"Add Members"}),(0,O.jsx)(o,{errorMessage:n.members})]}),(0,O.jsxs)("div",{className:"user-list__header user-list__row",children:[(0,O.jsxs)("div",{className:"user-list__column-block",children:[(0,O.jsx)("p",{children:"User"}),(0,O.jsx)("p",{className:"user-list__column--last-active",children:"Last Active"})]}),(0,O.jsx)("div",{className:"user-list__column--checkbox",children:(0,O.jsx)("p",{children:"Invite"})})]}),e]})}function h(e){var n=e.index,a=(e=e.user,l().handleMemberSelect),t=e.name||e.id;return(0,O.jsxs)("label",{htmlFor:e.id,title:t,className:"user-list__row",children:[(0,O.jsxs)("div",{className:"user-list__column-block",children:[(0,O.jsxs)("div",{className:"user-list__column--user-data",children:[(0,O.jsx)(re.q,{image:e.image,name:t,size:32}),(0,O.jsx)("p",{className:"user-item__name",children:t})]}),(0,O.jsx)("p",{className:"user-list__column--last-active",children:le[n]||"Yesterday"})]}),(0,O.jsx)("div",{className:"user-list__column--checkbox",children:(0,O.jsx)("input",{type:"checkbox",name:"members",id:e.id,value:e.id,onChange:a})})]})}function p(){var e=(n=(0,ne.mx)()).client,n=(n.channel,l().createChannelType),a=(0,H.useState)(null),t=(a=(0,I.Z)(a,2))[0],s=a[1],r=(a=(0,H.useState)(),(a=(0,I.Z)(a,2))[0]),i=a[1],c=[e.userID,"deleted-user-1234237-693e2db320a58b30cadd552e894c0ea8","freelancer-self-employed"];return(0,H.useEffect)((function(){var n=function(){var n=(0,S.Z)((0,L.Z)().mark((function n(){var a;return(0,L.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t)return n.abrupt("return");n.next=2;break;case 2:return s("loading"),n.prev=3,n.next=6,e.queryUsers({id:{$nin:c}},{id:1},{limit:10});case 6:(a=n.sent).users.length?i(a.users):s("empty"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),s("error");case 13:s(null);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(){return n.apply(this,arguments)}}();e&&n()}),[e,n]),(0,O.jsx)(m,{children:t?(0,O.jsx)("div",{className:"user-list__message",children:ie[t]}):(null==r?void 0:r.length)&&r.map((function(e,n){return(0,O.jsx)(h,{index:n,user:e},e.id)}))})}function v(){var e=q().closeAdminPanel,n=(r=l()).createChannelType,a=r.name,t=r.handleInputChange,s=r.handleSubmit,r=r.errors;return(0,O.jsxs)("div",{className:"admin-panel__form",children:[(0,O.jsx)(u,{onClose:e,title:"team"===n?"Create new channel":"Send direct message"}),"team"===n&&(0,O.jsx)(d,{error:r.name,name:a,onChange:t,placeholder:"channel-name (no spaces)"}),(0,O.jsx)(p,{}),(0,O.jsx)(i,{onButtonClick:s,buttonText:"team"===n?"Create channel":"Create message group"})]})}function x(){var e=q().closeAdminPanel,n=(s=l()).name,a=s.handleInputChange,t=s.handleSubmit,s=s.errors;return(0,O.jsxs)("div",{className:"admin-panel__form",children:[(0,O.jsx)(u,{onClose:e,title:"Edit channel"}),(0,O.jsx)(d,{name:n,error:s.name,onChange:a}),(0,O.jsx)(p,{}),(0,O.jsx)(i,{buttonText:"Save changes",onButtonClick:t})]})}function g(){return(0,H.useContext)(ue)}function f(){return(0,O.jsxs)("div",{className:"giphy-icon__wrapper",children:[(0,O.jsx)("svg",{width:"6",height:"12",viewBox:"0 0 6 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M2.75774 0.666748H5.66683L3.72744 4.54554H5.66683L2.03047 11.3334L2.75774 6.48493H0.333496L2.75774 0.666748Z",fill:"white"})}),(0,O.jsx)("p",{className:"giphy-icon__text",children:"GIPHY"})]})}function j(){var e=(s=g()).isComposingGiphyReply,n=s.clearGiphyFlagThread,a=s.setComposeGiphyReplyFlag,t=(0,fe.Nc)(),s=t.openEmojiPicker,r=t.closeEmojiPicker,l=t.emojiPickerIsOpen,i=(0,H.useState)(null),c=(i=(0,I.Z)(i,2))[0],u=(i=i[1],(0,H.useState)(null)),o=(u=(0,I.Z)(u,2))[0],d=(u=u[1],o=(c=(0,ge.D)(c,o,{placement:"top-end"})).styles,c=c.attributes,(0,H.useCallback)((function(s){var r=s.nativeEvent instanceof InputEvent&&"deleteContentBackward"===s.nativeEvent.inputType;1===t.text.length&&r&&n(),t.text.startsWith("/giphy")&&!e()&&(console.log("replacing"),s.target.value=s.target.value.replace("/giphy",""),a()),t.handleChange(s)}),[n,t,a,e]));return(0,O.jsxs)("div",{className:"thread-message-input__wrapper",children:[(0,O.jsxs)("div",{className:"thread-message-input__input",children:[e()&&(0,O.jsx)(f,{}),(0,O.jsx)(je.T,{onChange:d,placeholder:"Reply"}),(0,O.jsx)(ye,{type:"emoji",onClick:l?r:s,ref:i}),(0,O.jsx)("button",{className:"thread-message-input__send-button",disabled:!t.numberOfUploads&&!t.text.length,onClick:t.handleSubmit,children:(0,O.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M0.5 12L13.5 6L0.5 0V4.66666L9.8125 6L0.5 7.33334V12Z"})})})]}),l&&(0,O.jsx)("div",(0,A.Z)((0,A.Z)({className:"str-chat__message-textarea-emoji-picker-container",style:o.popper},c.popper),{},{ref:u,children:(0,O.jsx)(Ce.h,{})}))]})}function C(){var e,n=q().displayWorkspace,a=(0,ne.mx)().client,t=(s=(0,ke.JN)()).channel,s=s.watcher_count,r=(0,de.uz)().closeThread,l=q().togglePinnedMessageListOpen,i="".concat((null==t||null==(i=t.data)?void 0:i.name)||(null==t||null==(i=t.data)?void 0:i.id)||"random"),c=(0,H.useCallback)((function(){n("Admin-Channel-Edit")}),[n]);return(0,H.useCallback)((function(e){null!=r&&r(e),l()}),[r,l]),(0,O.jsxs)("div",{className:"team-channel-header__container",children:["messaging"===t.type?(t=Object.values(t.state.members).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==a.userID})),e=t.length-3,(0,O.jsx)(O.Fragment,{children:t.length?(0,O.jsxs)("div",{className:"workspace-header__block",children:[t.map((function(e,n){return e=e.user,2<n?null:(0,O.jsxs)("div",{className:"workspace-header__block-item",children:[(0,O.jsx)(re.q,{image:null==e?void 0:e.image,name:(null==e?void 0:e.name)||(null==e?void 0:e.id),size:50}),(0,O.jsx)("p",{className:"team-channel-header__name user",children:(null==e?void 0:e.name)||(null==e?void 0:e.id)||"Johnny Blaze"})]},n)})),0<e&&(0,O.jsx)("p",{className:"team-channel-header__name user",children:"and ".concat(e," more")})]}):(0,O.jsxs)("div",{className:"workspace-header__block",children:[(0,O.jsx)(re.q,{image:null,size:50}),(0,O.jsx)("p",{className:"team-channel-header__name user",children:"Johnny Blaze"})]})})):(0,O.jsxs)("div",{className:"workspace-header__block",children:[(0,O.jsx)("div",{className:"team-channel-header__name workspace-header__title",children:i}),(0,O.jsx)("button",{className:"workspace-info-button",onClick:c})]}),(0,O.jsx)("div",{className:"workspace-header__block",children:(0,O.jsx)("div",{className:"workspace-header__subtitle",children:(t=s)?1===t?"1 online":"".concat(t," online"):"No users online"})})]})}function _(){var e=q().activeWorkspace,n=new Date;return(0,O.jsx)(O.Fragment,{children:e.match("Admin")?(0,O.jsx)(ce,{}):(0,O.jsx)("div",{className:"channel__container",children:(0,O.jsx)(Q.$,{EmptyStateIndicator:Ne,LoadingIndicator:Se,ReactionsList:K.Y,TypingIndicator:Me,DateSeparator:function(){return(0,O.jsx)(X.Z,{formatDate:function(){return"".concat(n.getDate()+" "+Le[n.getMonth()])},date:new Date,position:"center"})},MessageTimestamp:function(){return(0,O.jsx)(ee.i,{format:"H:mm"})},children:(0,O.jsx)(oe,{children:(0,O.jsx)(we,{})})})})})}function b(e){e=e.channel;var n,a=(0,ne.mx)().client,t="Johnny Blaze";return(e=Object.values(e.state.members).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==a.userID}))).length&&1!==e.length?(0,O.jsxs)("div",{className:"channel-preview__item multi",children:[(0,O.jsx)("span",{children:(0,O.jsx)(re.q,{image:null==(n=e[0].user)?void 0:n.image,name:(null==(n=e[0].user)?void 0:n.name)||(null==(n=e[0].user)?void 0:n.id),size:18})}),(0,O.jsx)(re.q,{image:null==(n=e[1].user)?void 0:n.image,name:(null==(n=e[1].user)?void 0:n.name)||(null==(n=e[1].user)?void 0:n.id),size:18}),(0,O.jsxs)("p",{children:[(null==(n=e[0].user)?void 0:n.name)||(null==(n=e[0].user)?void 0:n.id)||t,","," ",(null==(n=e[1].user)?void 0:n.name)||(null==(n=e[1].user)?void 0:n.id)||t]})]}):(n=e[0],(0,O.jsxs)("div",{className:"channel-preview__item single",children:[(0,O.jsx)(re.q,{image:null==(e=n.user)?void 0:e.image,name:(null==(e=n.user)?void 0:e.name)||(null==(e=n.user)?void 0:e.id),size:36}),(0,O.jsx)("p",{children:(null==n||null==(e=n.user)?void 0:e.name)||(null==n||null==(e=n.user)?void 0:e.id)||t})]}))}function y(e){return e=e.name,(0,O.jsx)("div",{className:"channel-preview__item",children:(0,O.jsx)("p",{children:e})})}function k(e){var n=e.channel,a=(e=e.type,(r=(0,ne.mx)()).channel),t=r.setActiveChannel,s=q().displayWorkspace,r=(0,H.useCallback)((function(){s("Chat"),t&&t(n)}),[n,s,t]);return(0,O.jsx)("button",{className:(0,_e.W)("channel-preview",{selected:(null==n?void 0:n.id)===(null==a?void 0:a.id)}),onClick:r,children:"team"===e?(0,O.jsx)(y,{name:(null==n||null==(a=n.data)?void 0:a.name)||(null==n||null==(r=n.data)?void 0:r.id)||"random"}):(0,O.jsx)(b,{channel:n})})}function w(e){return void 0!==e.cid}function N(e){var n,a,t=e.focusedId,s=e.result,r=e.setChannel,l=(e=(0,ne.mx)()).client,i=e.setActiveChannel;return w(s)?(0,O.jsxs)("div",{onClick:function(){return r(n)},className:(0,_e.Z)("channel-search__result-container",{highlighted:t===(n=s).id}),children:[(0,O.jsx)("div",{className:"result-hashtag",children:"#"}),(0,O.jsx)("p",{className:"channel-search__result-text",children:null==n||null==(e=n.data)?void 0:e.name})]}):(0,O.jsxs)("div",{onClick:function(){Be({client:l,setActiveChannel:i,user:a})},className:(0,_e.Z)("channel-search__result-container",{highlighted:t===(a=s).id}),children:[(0,O.jsx)(re.q,{image:a.image,name:a.name||a.id,size:24}),(0,O.jsx)("p",{className:"channel-search__result-text",children:a.name||a.id||"Johnny Blaze"})]})}function Z(e){var n=e.teamChannels,a=e.directChannels,t=e.focusedId,s=e.loading,r=e.setChannel,l=e.setQuery;return document.addEventListener("click",(function(){return l("")})),(0,O.jsxs)("div",{className:"channel-search__results",children:[(0,O.jsx)("p",{className:"channel-search__results-header",children:"Channels"}),s&&!(null!=n&&n.length)&&(0,O.jsx)("p",{className:"channel-search__results-header",children:(0,O.jsx)("i",{children:"Loading..."})}),s||null!=n&&n.length?null==n?void 0:n.map((function(e,n){return(0,O.jsx)(N,{result:e,focusedId:t,setChannel:r},n)})):(0,O.jsx)("p",{className:"channel-search__results-header",children:(0,O.jsx)("i",{children:"No channels found"})}),(0,O.jsx)("p",{className:"channel-search__results-header",children:"Users"}),s&&!(null!=a&&a.length)&&(0,O.jsx)("p",{className:"channel-search__results-header",children:(0,O.jsx)("i",{children:"Loading..."})}),s||null!=a&&a.length?null==a?void 0:a.map((function(e,n){return(0,O.jsx)(N,{result:e,focusedId:t,setChannel:r},n)})):(0,O.jsx)("p",{className:"channel-search__results-header",children:(0,O.jsx)("i",{children:"No direct messages found"})})]})}function M(){var e=(0,Ie.s0)(),n=(0,He.T)();return(0,O.jsxs)("div",{className:"sidebar",children:[(0,O.jsx)(Ge,{}),(0,O.jsx)(Oe,{options:Re,filters:Ve,sort:Ue}),(0,O.jsx)("div",{className:"logout-button-container",children:(0,O.jsx)("button",{className:"logout-button",onClick:function(){(0,Y.F)(),n((0,De.nf)(!1)),e(Ae.m.LOGIN)},children:"Log out"})})]})}a.r(n),a.d(n,{ChatApp:function(){return Ye}});var L=a(74165),S=a(15861),I=a(29439),A=a(1413),H=a(72791),D=a(21626),E=(n=a(31054),a(15502)),P=a(27881),z=a(98190),F=a(16653),O=a(80184),T=(0,H.createContext)({activeWorkspace:"Chat",closeAdminPanel:t,displayWorkspace:t,pinnedMessageListOpen:!1,togglePinnedMessageListOpen:t,closePinnedMessageListOpen:t}),q=function(){return(0,H.useContext)(T)},B=function(e){return function(e){window.parent.postMessage(e,"*")}},G="https://youtu.be/Ujvy-DEA-UM",V="react-to-message",R="run-giphy",U="send-youtube",W="drag-drop-image",$="start-thread",J="send-message",Y=a(28617),Q=a(77540),K=a(54149),X=a(51888),ee=a(37861),ne=a(28802),ae=a(93433),te=(0,H.createContext)({handleInputChange:function(){return null},handleMemberSelect:function(){return null},handleSubmit:function(){return null},members:[],name:"",errors:{name:null,members:null}}),se="CloseButton_closeButton__Tb+s+",re=a(84565),le=["12 min ago","27 min ago","6 hours ago","14 hours ago"],ie={empty:"No users found.",error:"Error loading, please refresh and try again.",loading:"Loading users..."},ce=function(){var e=(n=(0,ne.mx)()).client,n=n.channel,a=(t=q()).displayWorkspace,t=t.activeWorkspace,s=(0,H.useCallback)((function(){return a("Chat")}),[a]),l={name:"",members:[]},i=null;return t.match("Channel-Create")?(l={members:e.userID?[e.userID]:[],name:""},i=v):t.match("Channel-Edit")&&(l={members:[],name:(null==n||null==(e=n.data)?void 0:e.name)||(null==n||null==(e=n.data)?void 0:e.id)},i=x),(0,O.jsx)(r,{workspace:t,onSubmit:s,defaultValues:l,children:(0,O.jsx)("div",{className:"channel__container",children:i&&(0,O.jsx)(i,{})})})},ue=(0,H.createContext)({}),oe=function(e){e=e.children;var n=(0,H.useState)({"main-input":!1,"thread-input":!1}),a=(n=(0,I.Z)(n,2))[0],t=n[1],s=(n=(0,H.useCallback)((function(e){t((function(n){return e?(0,A.Z)((0,A.Z)({},n),{},{"thread-input":!1}):(0,A.Z)((0,A.Z)({},n),{},{"main-input":!1})}))}),[]),(0,H.useCallback)((function(){t((function(e){return(0,A.Z)((0,A.Z)({},e),{},{"main-input":!1})}))}),[])),r=(0,H.useCallback)((function(){t((function(e){return(0,A.Z)((0,A.Z)({},e),{},{"thread-input":!1})}))}),[]),l=(0,H.useCallback)((function(e){return e?a["thread-input"]:a["main-input"]}),[a]),i=(0,H.useCallback)((function(){return a["main-input"]}),[a]),c=(0,H.useCallback)((function(){return a["thread-input"]}),[a]),u=(0,H.useCallback)((function(){t((function(e){return(0,A.Z)((0,A.Z)({},e),{},{"main-input":!0})}))}),[]),o=(0,H.useCallback)((function(){t((function(e){return(0,A.Z)((0,A.Z)({},e),{},{"thread-input":!0})}))}),[]);return(0,O.jsx)(ue.Provider,{value:{clearGiphyFlag:n,clearGiphyFlagMainInput:s,clearGiphyFlagThread:r,inputHasGiphyMessage:l,isComposingGiphyMessage:i,isComposingGiphyReply:c,setComposeGiphyMessageFlag:u,setComposeGiphyReplyFlag:o},children:e})},de=a(3979),me=a(80863),he=a(5628),pe=a(71803),ve=a(9667),xe=a(99729),ge=a(38272),fe=a(41920),je=a(64892),Ce=a(91761),_e=a(28182),be={bold:function(){return(0,O.jsx)("svg",{width:"10",height:"12",viewBox:"0 0 10 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M7.63 5.82C8.46 5.24 9 4.38 9 3.5C9 1.57 7.43 0 5.5 0H0V12H6.25C8.04 12 9.5 10.54 9.5 8.75C9.5 7.45 8.73 6.34 7.63 5.82ZM2.5 2H5.25C6.08 2 6.75 2.67 6.75 3.5C6.75 4.33 6.08 5 5.25 5H2.5V2ZM5.75 10H2.5V7H5.75C6.58 7 7.25 7.67 7.25 8.5C7.25 9.33 6.58 10 5.75 10Z"})})},code:function(){return(0,O.jsx)("svg",{width:"20",height:"12",viewBox:"0 0 20 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M7.4 10.6L2.8 6L7.4 1.4L6 0L0 6L6 12L7.4 10.6ZM12.6 10.6L17.2 6L12.6 1.4L14 0L20 6L14 12L12.6 10.6Z"})})},emoji:function(){return(0,O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",children:(0,O.jsx)("path",{fillRule:"evenodd",d:"M1.6 8a6.4 6.4 0 1112.8 0A6.4 6.4 0 011.6 8zM8 0a8 8 0 100 16A8 8 0 008 0zM6 7.2a1.2 1.2 0 100-2.4 1.2 1.2 0 000 2.4zM11.2 6a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zM5.455 9.141a.8.8 0 10-1.31.918c.542.774 1.578 1.737 2.962 2.024 1.46.303 3.1-.184 4.688-1.948a.8.8 0 00-1.19-1.07C9.313 10.5 8.22 10.68 7.433 10.517c-.863-.18-1.586-.817-1.978-1.376z",clipRule:"evenodd"})})},italics:function(){return(0,O.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M4 0V2H6.58L2.92 10H0V12H8V10H5.42L9.08 2H12V0H4Z"})})},"strike-through":function(){return(0,O.jsx)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,O.jsx)("path",{d:"M3.76889 5.11111C3.53778 4.68444 3.42222 4.19556 3.42222 3.62667C3.42222 3.08444 3.53778 2.59556 3.77778 2.14222C4.00889 1.69778 4.33778 1.31556 4.76444 0.995555C5.19111 0.684444 5.69778 0.435556 6.27556 0.257778C6.86222 0.0888889 7.51111 0 8.21333 0C8.93333 0 9.58222 0.0977777 10.1778 0.302222C10.7644 0.497778 11.2711 0.782222 11.68 1.13778C12.0978 1.49333 12.4178 1.92 12.64 2.40889C12.8622 2.89778 12.9778 3.43111 12.9778 4.01778H10.3022C10.3022 3.74222 10.2578 3.49333 10.1689 3.26222C10.0889 3.02222 9.95556 2.82667 9.77778 2.65778C9.6 2.48889 9.37778 2.36444 9.11111 2.26667C8.84444 2.17778 8.52444 2.12444 8.16889 2.12444C7.82222 2.12444 7.51111 2.16 7.25333 2.24C6.99556 2.32 6.78222 2.42667 6.61333 2.56C6.44444 2.70222 6.31111 2.86222 6.22222 3.04889C6.13333 3.23556 6.08889 3.43111 6.08889 3.63556C6.08889 4.06222 6.31111 4.41778 6.74667 4.71111C7.08444 4.93333 7.43111 5.13778 8 5.33333H3.90222C3.85778 5.26222 3.80444 5.18222 3.76889 5.11111ZM16 8V6.22222H0V8H8.55111C8.71111 8.06222 8.90667 8.12444 9.04 8.17778C9.36889 8.32889 9.62667 8.48 9.81333 8.63111C10 8.78222 10.1244 8.95111 10.1956 9.13778C10.2578 9.31556 10.2933 9.52 10.2933 9.75111C10.2933 9.95556 10.2489 10.1511 10.1689 10.3378C10.0889 10.5156 9.96445 10.6756 9.79556 10.8089C9.62667 10.9422 9.42222 11.04 9.16444 11.12C8.90667 11.1911 8.60444 11.2356 8.26667 11.2356C7.88444 11.2356 7.52889 11.2 7.21778 11.12C6.90667 11.04 6.63111 10.9156 6.40889 10.7467C6.18667 10.5778 6.00889 10.3556 5.88444 10.08C5.76 9.80444 5.66222 9.40444 5.66222 9.00445H3.02222C3.02222 9.49333 3.09333 10.0089 3.23556 10.4089C3.37778 10.8089 3.56444 11.1644 3.81333 11.4844C4.06222 11.7956 4.34667 12.0711 4.68444 12.3022C5.01333 12.5333 5.37778 12.7289 5.76889 12.88C6.16 13.0311 6.56889 13.1467 6.99556 13.2267C7.42222 13.2978 7.84889 13.3422 8.27556 13.3422C8.98667 13.3422 9.63556 13.2622 10.2133 13.0933C10.7911 12.9244 11.2889 12.6933 11.6978 12.3911C12.1067 12.0889 12.4267 11.7067 12.6489 11.2622C12.8711 10.8178 12.9867 10.3111 12.9867 9.74222C12.9867 9.20889 12.8978 8.72889 12.7111 8.31111C12.6667 8.21333 12.6133 8.10667 12.56 8.01778H16V8Z"})})}},ye=(0,H.forwardRef)((function(e,n){var a=e.active,t=e.onClick,s=(e=e.type,be[e]);return s?(0,O.jsx)("button",{className:(0,_e.Z)("message-input__controls-button",e,{active:a}),onClick:t,ref:n,children:(0,O.jsx)(s,{})}):null})),ke=a(73461),we=function(){var e=(t=g()).inputHasGiphyMessage,n=t.clearGiphyFlag,a=(0,de.uz)().sendMessage,t=(0,A.Z)((0,A.Z)({},me.Z1.team),{},{user:!0}),s=(0,A.Z)((0,A.Z)({},me.Z1.messaging),{},{user:!0});t=(0,A.Z)((0,A.Z)({},me.Z1),{},{team:t,messaging:s}),s=(0,H.useCallback)((function(t){var s={attachments:t.attachments,mentioned_users:t.mentioned_users,parent_id:null==(s=t.parent)?void 0:s.id,parent:t.parent,text:t.text},r=!!s.parent_id;e(r)&&(t="/giphy ".concat(t.text),s=(0,A.Z)((0,A.Z)({},s),{},{text:t})),a&&(t=a(s),(0,D.t1)(t,"send message"),n(r))}),[e,a,n]);return new Date,(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(he.R,{children:[(0,O.jsx)(C,{}),(0,O.jsx)(pe.r,{pinPermissions:t,hideDeletedMessages:!0}),(0,O.jsx)(ve.R,{grow:!0,overrideSubmitHandler:s})]}),(0,O.jsx)(xe.j,{additionalMessageInputProps:{grow:!0,Input:j,overrideSubmitHandler:s}})]})},Ne=function(){var e,n,a=(0,ne.mx)(),t=a.channel,s=a.client,r=Object.values((null==t||null==(a=t.state)?void 0:a.members)||{}).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==s.userID}));return(0,O.jsxs)("div",{className:"channel-empty__container",children:["team"===(null==t?void 0:t.type)?"#heshIcon":r.length?(0,O.jsx)("div",{className:"channel-empty__avatars",children:r.map((function(e,n){var a;return 2<n?null:(0,O.jsx)(re.q,{image:null==(a=e.user)?void 0:a.image,name:(null==(a=e.user)?void 0:a.name)||(null==(a=e.user)?void 0:a.id),size:72},n)}))}):(0,O.jsx)(re.q,{size:72}),(0,O.jsxs)("p",{className:"channel-empty__main-description",children:["This is the beginning of your chat history","team"===(null==t?void 0:t.type)?" in ":" with ","team"===(null==t?void 0:t.type)?"#".concat((null==t||null==(a=t.data)?void 0:a.name)||(null==t||null==(a=t.data)?void 0:a.id)):1===r.length?(0,O.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null==(e=r[0].user)?void 0:e.name)||(null==(e=r[0].user)?void 0:e.id))}):2===r.length?(0,O.jsx)("span",{className:"channel-empty__user-name",children:"@".concat((null==(e=r[0].user)?void 0:e.name)||(null==(e=r[0].user)?void 0:e.id)," and @").concat((null==(e=r[1].user)?void 0:e.name)||(null==(e=r[1].user)?void 0:e.id))}):(n="",r.forEach((function(e,a){n=a!==r.length-1?"".concat(n,"@").concat((null==e||null==(a=e.user)?void 0:a.name)||(null==e||null==(a=e.user)?void 0:a.id),", "):"".concat(n," and @").concat((null==e||null==(a=e.user)?void 0:a.name)||(null==e||null==(a=e.user)?void 0:a.id))})),(0,O.jsx)("span",{className:"channel-empty__user-name",children:n||"the Universe"})),"."]}),(0,O.jsx)("p",{className:"channel-empty__secondary-description",children:"Send messages, attachments, links, emojis, and more."})]})},Ze=a(27855),Me=function(){var e,n=(0,ne.mx)().client,a=(0,Ze.f5)().typing;return n&&a&&(a=Object.values(a).filter((function(e){return(null==(e=e.user)?void 0:e.id)!==(null==(e=n.user)?void 0:e.id)})).map((function(e){return(null==(e=e.user)?void 0:e.name)||(null==e?void 0:e.id)}))).length?(e="Someone is typing",1===a.length?e="".concat(a[0]," is typing"):2===a.length?e="".concat(a[0]," and ").concat(a[1]," are typing"):2<a.length&&(e="".concat(a[0]," and ").concat(a.length-1," more are typing")),(0,O.jsxs)("div",{className:"typing-indicator__input",children:[(0,O.jsxs)("div",{className:"dots",children:[(0,O.jsx)("div",{className:"dot"}),(0,O.jsx)("div",{className:"dot"}),(0,O.jsx)("div",{className:"dot"})]}),(0,O.jsx)("div",{className:"typing-indicator__input__text",children:e})]})):null},Le=["January","February","March","April","May","June","July","August","September","October","November","December"],Se=function(){return null},Ie=a(57689),Ae=a(13294),He=a(9911),De=a(50312),Ee=a(78206),Pe=a(44925),ze=["children","error","loading","type"],Fe=(0,H.memo)((function(e){var n=e.children,a=void 0!==(a=e.error)&&a,t=e.loading,s=e.type,r=((0,Pe.Z)(e,ze),q().displayWorkspace);e=(0,H.useCallback)((function(){r("Admin-Admin-Channel-Create__".concat(s))}),[s,r]);return a?"team"===s?(0,O.jsx)("div",{className:"team-channel-list",children:(0,O.jsx)("p",{className:"team-channel-list__message",children:"Connection error, please wait a moment and try again."})}):null:t?(0,O.jsx)("div",{className:"team-channel-list",children:(0,O.jsxs)("p",{className:"team-channel-list__message loading",children:["team"===s?"Channels":"Messages"," loading...."]})}):(0,O.jsxs)("div",{className:"team-channel-list",children:[(0,O.jsxs)("div",{className:"team-channel-list__header",children:[(0,O.jsx)("p",{className:"team-channel-list__header__title",children:"team"===s?"Channels":"Direct Messages"}),(0,O.jsx)("button",{className:"team-channel-button",onClick:e})]}),n]})})),Oe=function(e){var n=e.filters,a=e.options;e=e.sort;return(0,O.jsx)(Ee.G,{channelRenderFilterFn:function(e){return e.filter((function(e){return"messaging"===e.type}))},filters:n[1],options:a,sort:e,setActiveChannelOnMount:!1,List:function(e){return(0,O.jsx)(Fe,(0,A.Z)((0,A.Z)({},e),{},{type:"messaging"}))},Preview:function(e){return(0,O.jsx)(k,(0,A.Z)((0,A.Z)({},e),{},{type:"messaging"}))}})},Te=a(95095),qe=a.n(Te),Be=function(){var e=(0,S.Z)((0,L.Z)().mark((function e(n){var a,t,s,r,l;return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.client,t=n.setActiveChannel,s=n.user,r={type:"messaging",member_count:2,members:{$eq:[s.id,a.userID||""]}},e.next=4,a.queryChannels(r);case 4:if(r=e.sent,l=(l=(0,I.Z)(r,1))[0])return e.abrupt("return",t(l));e.next=9;break;case 9:return l=a.channel("messaging",{members:[s.id,a.userID||""]}),e.abrupt("return",t(l));case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ge=function(){var e=(a=(0,ne.mx)()).client,n=a.setActiveChannel,a=(0,H.useState)(),t=(a=(0,I.Z)(a,2))[0],s=a[1],r=(a=(0,H.useState)(),(a=(0,I.Z)(a,2))[0]),l=a[1],i=(a=(0,H.useState)(),(a=(0,I.Z)(a,2))[0]),c=a[1],u=(a=(0,H.useState)(),(a=(0,I.Z)(a,2))[0]),o=a[1],d=(a=(0,H.useState)(""),(a=(0,I.Z)(a,2))[0]),m=a[1],h=(a=(0,H.useState)(!1),(a=(0,I.Z)(a,2))[0]),p=a[1],v=(a=(0,H.useState)(""),(a=(0,I.Z)(a,2))[0]),x=a[1],g=(0,H.useCallback)((function(a){"ArrowDown"===a.key?o((function(e){return void 0===e||void 0===t||e===t.length-1?0:e+1})):"ArrowUp"===a.key?o((function(e){return void 0===e||void 0===t?0:0===e?t.length-1:e-1})):"Enter"===a.key&&(a.preventDefault(),void 0!==t&&void 0!==u&&(w(a=t[u])?n(a):Be({client:e,setActiveChannel:n,user:a})),o(void 0),m(""),x(""))}),[t,e,u,n]),f=(a=function(){var n=(0,S.Z)((0,L.Z)().mark((function n(a){var t,r,i,u;return(0,L.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=e.queryChannels({type:"team",name:{$autocomplete:a}},{},{limit:5}),r=e.queryUsers({id:{$ne:e.userID||""},$and:[{name:{$autocomplete:a}}]},{id:1},{limit:5}),n.next=5,Promise.all([t,r]);case 5:t=n.sent,r=(0,I.Z)(t,2),i=r[0],u=r[1].users,i.length&&l(i),u.length&&c(u),s([].concat((0,ae.Z)(i),(0,ae.Z)(u))),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),x("");case 17:p(!1);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}(),qe()(a,200,{trailing:!0}));return(0,H.useEffect)((function(){return v&&document.addEventListener("keydown",g),function(){return document.removeEventListener("keydown",g)}}),[g,v]),(0,H.useEffect)((function(){v||(l([]),c([]))}),[v]),(0,H.useEffect)((function(){u&&0<=u&&t&&m(t[u].id||"")}),[t,u]),(0,O.jsxs)("div",{className:"channel-search__container",children:[(0,O.jsx)("div",{className:"channel-search__input__wrapper",children:(0,O.jsx)("input",{onChange:function(e){e.preventDefault(),p(!0),o(void 0),x(e.target.value),e.target.value&&f(e.target.value)},placeholder:"Search",type:"text",value:v})}),v&&(0,O.jsx)(Z,{teamChannels:r,directChannels:i,focusedId:d,loading:h,setChannel:function(e){x(""),n(e)},setQuery:x})]})},Ve=[{type:"team",demo:"team",members:{$in:[(a=new z.Z).get("userId")]}},{type:"messaging",demo:"team",members:{$in:[a.get("userId")]}}],Re={state:!0,watch:!0,presence:!0,limit:3},Ue=[{last_message_at:-1},{updated_at:-1}],We=new z.Z,$e=new n.V({language:"en",translationsForLanguage:(0,A.Z)({},E)}),Je=D.c8.getInstance("hb9ywaasq4wt",{enableInsights:!0,enableWSFallback:!0}),Ye=function(){var e=(0,H.useState)(null),n=(e=(0,I.Z)(e,2))[0],a=e[1],t=We.get("token"),r={id:We.get("userId"),name:We.get("username"),image:We.get("avatarURL"),hashedPassword:We.get("hashedPassword")};return function(e){var n=e.chatClient,a=e.targetOrigin;(0,H.useEffect)((function(){function e(e){var n,a=e.message;switch(e.type){case"reaction.new":t(V);break;case"message.new":if("giphy"===(null==a?void 0:a.command))t(R);else{if(null!=a&&null!=(n=a.attachments)&&n.length){if("video"===a.attachments[0].type&&a.attachments[0].og_scrape_url===G){t(U);break}if("image"===a.attachments[0].type){t(W);break}}null!=a&&a.parent_id?t($):t(J)}}}var t=B(a);return n&&n.on(e),function(){return null==n?void 0:n.off(e)}}),[n,a])}({chatClient:Je,targetOrigin:"https://server-six-pearl.vercel.app/auth/"}),(0,H.useEffect)((function(){return t&&function(){var e=(0,S.Z)((0,L.Z)().mark((function e(){return(0,L.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Je.connectUser(r,t);case 3:a(Je),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),new RegExp("was deleted").test(e.t0.message)&&(console.log("error setChatClient",e.t0.message),(0,Y.F)(),Je.disconnectUser());case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()(),function(){Je.disconnectUser()}}),[]),n?(0,O.jsx)("div",{className:"app-content",children:(0,O.jsx)(P.e,{client:Je,i18nInstance:$e,children:(0,O.jsxs)(s,{children:[(0,O.jsx)(M,{}),(0,O.jsx)(_,{})]})})}):(0,O.jsx)(F.A,{})}}}]);